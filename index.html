<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Fecom by icefox0801</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Fecom</h1>
      <h2 class="project-tagline">A magic component management tool</h2>
      <a href="https://github.com/icefox0801/fecom" class="btn">View on GitHub</a>
      <a href="https://github.com/icefox0801/fecom/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/icefox0801/fecom/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="fecom" class="anchor" href="#fecom" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>fecom</h1>

<p>A magic component management tool</p>

<p><a href="https://travis-ci.org/icefox0801/fecom"><img src="https://travis-ci.org/icefox0801/fecom.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/github/icefox0801/fecom?branch=master"><img src="https://coveralls.io/repos/github/icefox0801/fecom/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://david-dm.org/icefox0801/fecom"><img src="https://david-dm.org/icefox0801/fecom.svg" alt="Dependency Status"></a></p>

<hr>

<h2>
<a id="简介" class="anchor" href="#%E7%AE%80%E4%BB%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>简介</h2>

<p><code>fecom</code>是依托于<a href="https://about.gitlab.com/">Gitlab</a>的组件管理工具，只需要满足下面条件，就可以通过<code>fecom</code>管理组件：</p>

<ul>
<li>对<code>fecom</code>进行正确配置</li>
<li>组件中包含<code>component.json</code>配置文件</li>
<li>组件中有与版本相对应的<code>tag</code>
</li>
</ul>

<p>组件示例可以参考：<a href="https://gitlab.com/u/icefox0801/projects">https://gitlab.com/u/icefox0801/projects</a></p>

<h2>
<a id="安装" class="anchor" href="#%E5%AE%89%E8%A3%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装</h2>

<div class="highlight highlight-source-shell"><pre>npm install -g fecom</pre></div>

<h2>
<a id="配置" class="anchor" href="#%E9%85%8D%E7%BD%AE" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>配置</h2>

<p>首次执行<code>fecom</code>命令，会提示输入<code>用户名</code>、<code>邮箱</code>和<code>Gitlab Token</code></p>

<div class="highlight highlight-source-shell"><pre>icefox@icefoxmac:<span class="pl-k">~</span> $ fecom
11:55:51 INFO  用户配置文件未找到，初始化<span class="pl-s"><span class="pl-pds">"</span>~/.fecomrc<span class="pl-pds">"</span></span>
<span class="pl-k">?</span> 请输入您的用户名: icefox0801
<span class="pl-k">?</span> 请输入您的邮箱: icefox0801@hotmail.com
<span class="pl-k">?</span> 请输入您的Gitlab token: <span class="pl-k">********************</span>
11:56:06 INFO  完成初始化用户配置文件</pre></div>

<p>输入以上信息后，用户信息会被保存到<code>~/.fecomrc</code>文件中，以后每次执行<code>fecom</code>会读取<code>~/.fecomrc</code>中的用户配置</p>

<p>除此之外，还需要配置<code>Gitlab</code>的<code>API</code>地址和默认组件所属的用户/组。例如，<code>Gitlab</code>的地址为<code>https://gitlab.exaplem.com</code>，默认组件的仓库都放下<code>fe-group</code>下，那么还需执行：</p>

<div class="highlight highlight-source-shell"><pre>icefox@icefoxmac:<span class="pl-k">~</span> $ fecom p -d <span class="pl-s"><span class="pl-pds">"</span>domain=https://gitlab.example.com&amp;owner=fe-group<span class="pl-pds">"</span></span></pre></div>

<h2>
<a id="用法" class="anchor" href="#%E7%94%A8%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>用法</h2>

<p>Usage: fecom [options]</p>

<p>Commands:</p>

<pre><code>init [options]                         初始化组件
install|i [options] [component...]     安装组件
uninstall|un [options] &lt;component...&gt;  卸载组件
list|ls [options] [component...]       列出组件版本
info &lt;component&gt;                       显示组件的详细信息
search|s [options] &lt;pattern&gt;           搜索组件
profile|p [options] [query]            管理用户配置
tree|t [options] [component...]        打印组件依赖树
version|v [options] [releaseType]      组件版本更新
update|u [component...]                更新组件
</code></pre>

<p>A magic component management tool</p>

<p>Options:</p>

<pre><code>-h, --help  output usage information
</code></pre>

<h2>
<a id="componentjson" class="anchor" href="#componentjson" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>component.json</h2>

<p><code>component.json</code>配置文件可能存在于项目或者组件中，在不同的应用场景，并非所有的配置项都有用，请酌情进行配置！</p>

<ul>
<li>
<code>name</code>: 名称，请和<a href="https://about.gitlab.com/">Gitlab</a>项目名称保持一致</li>
<li>
<code>description</code>: 描述，请用简洁的语言描述项目或者组件</li>
<li>
<code>version</code>: 版本号，<strong>仅适用于组件</strong>
</li>
<li>
<code>dependencies</code>: 依赖的组件</li>
<li>
<code>dir</code>: 组件安装的目录，<strong>仅适用于项目</strong>
</li>
<li>
<code>author</code>: 组件作者信息</li>
<li>
<code>main</code>: 入口文件，<strong>仅适用于组件</strong>
</li>
<li>
<code>exclude</code>: 安装时排除的文件和目录，仅适用于组件，配置规则可以参考<a href="https://github.com/isaacs/node-glob">node-glob</a>
</li>
</ul>

<p><code>fecom</code>的默认配置项：</p>

<ul>
<li>
<code>name</code>: 执行<code>fecom</code>命令的目录</li>
<li>
<code>dir</code>: <code>components</code>
</li>
<li>
<code>owner</code>: <code>fecom-fe</code>
</li>
<li>
<code>domain</code>: <code>http://gitlab.58corp.com</code>
</li>
</ul>

<p>综上所述：</p>

<ul>
<li>项目应该配置的项有<code>name</code>、<code>description</code>、<code>dir</code>、<code>dependencies</code>、<code>author</code>
</li>
<li>组件应该配置的项有<code>name</code>、<code>description</code>、<code>version</code>、<code>main</code>、<code>author</code>、<code>dependencies</code>、<code>exclude</code>
</li>
</ul>

<h2>
<a id="常用命令介绍" class="anchor" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>常用命令介绍</h2>

<ul>
<li>
<code>fecom init</code>: 初始化组件的目录结构，如果指定<code>-S</code>参数则跳过所有问题直接通过默认配置生成组件目录结构</li>
<li>
<code>fecom install</code>: 安装<code>component.json</code>中<code>dependencies</code>项所指定的所有组件</li>
<li>
<code>fecom install compA</code>: 安装<code>compA</code>组件以及它的依赖，并保存到<code>component.json</code>中</li>
<li>
<code>fecom uninstall compA</code>: 卸载<code>compA</code>组件以及它的依赖</li>
<li>
<code>fecom update compA</code>: 更新<code>compA</code>到最新版本，只更新<code>compA</code>本身</li>
<li>
<code>fecom info compA</code>: 显示<code>compA</code>的详细信息以及版本更新历史</li>
<li>
<code>fecom list</code>: 列出本地安装的所有组件，如果指定<code>-U</code>参数则检查是否有更新</li>
<li>
<code>fecom list compA</code>: 列出本地安装的<code>compA</code>组件，如果指定<code>-U</code>参数则检查是否有更新</li>
<li>
<code>fecom search compA</code>: 按照<code>compA</code>搜索<code>Gitlab</code>中的组件，如果指定<code>-O</code>参数则按用户/组搜索</li>
<li>
<code>fecom profile</code>: 列出用户配置</li>
<li>
<code>fecom profile "username=icefox0801"</code>: 以<code>query</code>形式设置用户配置项</li>
<li>
<code>fecom profile -D "domain=https://gitlab.example.com"</code>: 以<code>query</code>形式设置<code>fecom</code>默认配置项</li>
<li>
<code>fecom tree</code>: 以依赖树的形式列出本地安装的所有组件</li>
<li>
<code>fecom tree compA</code>: 以依赖树的形式列出本地安装的<code>compA</code>组件，如果指定<code>-R</code>参数，则列出远程<code>compA</code>组件的依赖树</li>
<li>
<code>fecom version</code>: 提示选择并更新组件的版本号，会更新<code>component.json</code>中的<code>version</code>和自动添加<code>tag</code>，注意还需执行<code>git push --follow-tags</code>来推送到远程仓库</li>
<li>
<code>fecom version patch</code>: 以<code>patch</code>类型更新组件版本号，类型也可以为<code>major</code>或者<code>minor</code>
</li>
</ul>

<h2>
<a id="组件安装格式" class="anchor" href="#%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85%E6%A0%BC%E5%BC%8F" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>组件安装格式</h2>

<p>组件名称格式 <code>[source:][owner/]name[@version][?args]</code>，以<code>group/compA</code>为例</p>

<ul>
<li><code>fecom install compA</code></li>
<li><code>fecom install group/compA</code></li>
<li><code>fecom install group/compA@1.8.3</code></li>
<li><code>fecom install npm:group/compA@1.8.3（目前未实现，后续根据需要实现扩展npm包）</code></li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/icefox0801/fecom">Fecom</a> is maintained by <a href="https://github.com/icefox0801">icefox0801</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
